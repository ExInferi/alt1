{"version":3,"sources":["webpack://AbilityReader/webpack/universalModuleDefinition","webpack://AbilityReader/webpack/bootstrap","webpack://AbilityReader/./actionbar.ts","webpack://AbilityReader/./actionbarimgs/dren.data.png","webpack://AbilityReader/./actionbarimgs/drenretal.data.png","webpack://AbilityReader/./actionbarimgs/lifepoints.data.png","webpack://AbilityReader/./actionbarimgs/lifepointspoison.data.png","webpack://AbilityReader/./actionbarimgs/prayer.data.png","webpack://AbilityReader/./actionbarimgs/prayeron.data.png","webpack://AbilityReader/./actionbarimgs/sumpoints.data.png","webpack://AbilityReader/./imgs/actionbarnumbers.data.png","webpack://AbilityReader/./imgs/settingscog.data.png","webpack://AbilityReader/./imgs/smallbarnumber.data.png","webpack://AbilityReader/./index.ts","webpack://AbilityReader/external {\"root\":\"A1lib\",\"commonjs\":\"@alt1/base\",\"commonjs2\":\"@alt1/base\",\"amd\":\"@alt1/base\"}","webpack://AbilityReader/external {\"root\":\"OCR\",\"commonjs\":\"@alt1/ocr\",\"commonjs2\":\"@alt1/ocr\",\"amd\":\"@alt1/ocr\"}"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@alt1/base\"), require(\"@alt1/ocr\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@alt1/base\", \"@alt1/ocr\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@alt1/ability-reader\"] = factory(require(\"@alt1/base\"), require(\"@alt1/ocr\"));\n\telse\n\t\troot[\"AbilityReader\"] = factory(root[\"A1lib\"], root[\"OCR\"]);\n})((typeof self!='undefined'?self:this), function(__WEBPACK_EXTERNAL_MODULE__alt1_base__, __WEBPACK_EXTERNAL_MODULE__alt1_ocr__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import * as a1lib from \"@alt1/base\";\r\nimport { ImgRef } from \"@alt1/base\";\r\nimport * as OCR from \"@alt1/ocr\";\r\n\r\nvar chatfont = require(\"@alt1/ocr/fonts/aa_8px_new.fontmeta.json\");\r\n\r\nvar imgs = a1lib.ImageDetect.webpackImages({\r\n\tdren: require(\"./actionbarimgs/dren.data.png\"),\r\n\tdrenretal: require(\"./actionbarimgs/drenretal.data.png\"),\r\n\tlifepoints: require(\"./actionbarimgs/lifepoints.data.png\"),\r\n\tlifepointspoison: require(\"./actionbarimgs/lifepointspoison.data.png\"),\r\n\tprayer: require(\"./actionbarimgs/prayer.data.png\"),\r\n\tprayeron: require(\"./actionbarimgs/prayeron.data.png\"),\r\n\tsumpoints: require(\"./actionbarimgs/sumpoints.data.png\"),\r\n});\r\n\r\nexport function shakemepls() {\r\n\tconsole.log(\"I'm not shaken\");\r\n}\r\n\r\nexport type LifeState = {\r\n\thp: number,\r\n\tdren: number,\r\n\tpray: number,\r\n\tsum: number,\r\n\texacthp: { cur: number, max: number },\r\n\texactpray: { cur: number, max: number },\r\n\texactsum: { cur: number, max: number },\r\n\texactdren: { cur: number, max: number },\r\n}\r\n\r\n/*\r\nfunction makelayout(){\r\n\tvar img=a1lib.bindfullrs();\r\n\tvar qq={ hp: a1lib.findsubimg(img, ActionbarReader.lifepoints)[0], dren: a1lib.findsubimg(img, ActionbarReader.dren)[0], pray: a1lib.findsubimg(img, ActionbarReader.prayer)[0], sum: a1lib.findsubimg(img, ActionbarReader.sumpoints)[0]}\r\n\tvar qqq={hp:{x:qq.hp.x-qq.hp.x,y:qq.hp.y-qq.hp.y},dren:{x:qq.dren.x-qq.hp.x,y:qq.dren.y-qq.hp.y},pray:{x:qq.pray.x-qq.hp.x,y:qq.pray.y-qq.hp.y},sum:{x:qq.sum.x-qq.hp.x,y:qq.sum.y-qq.hp.y}}\r\n\treturn jsonEncode(qqq);\r\n}*/\r\n\r\ntype Layout = {\r\n\thp: a1lib.PointLike,\r\n\tdren: a1lib.PointLike,\r\n\tpray: a1lib.PointLike,\r\n\tsum: a1lib.PointLike,\r\n\twidth: number,\r\n\theight: number,\r\n\thor: boolean,\r\n\tbarlength: number,\r\n\ttype: MainBarType\r\n}\r\n\r\ntype MainBarType = \"mainflat\" | \"mainhor\" | \"mainver\" | \"maintower\"\r\n\r\nexport default class ActionbarReader {\r\n\tpos: { x: number, y: number, layout: Layout } = null;\r\n\r\n\tstatic layouts: StringMap<Layout> = {\r\n\t\tmainflat: { hp: { x: 0, y: 0 }, dren: { x: 118, y: 0 }, pray: { x: 236, y: 0 }, sum: { x: 354, y: 0 }, width: 465, height: 25, hor: true, barlength: 80, type: \"mainflat\" },\r\n\t\tmainhor: { hp: { x: 0, y: 0 }, dren: { x: 100, y: 0 }, pray: { x: 16, y: 22 }, sum: { x: 116, y: 22 }, width: 210, height: 45, hor: true, barlength: 62, type: \"mainhor\" },\r\n\t\tmainver: { hp: { x: 0, y: 0 }, dren: { x: 0, y: 100 }, pray: { x: 22, y: 16 }, sum: { x: 22, y: 116 }, width: 35, height: 210, hor: false, barlength: 62, type: \"mainver\" },\r\n\t\tmaintower: { hp: { x: 0, y: 0 }, dren: { x: 0, y: 119 }, pray: { x: 0, y: 238 }, sum: { x: 0, y: 357 }, width: 20, height: 465, hor: false, barlength: 80, type: \"maintower\" }\r\n\t};\r\n\r\n\tfind(img: ImgRef) {\r\n\t\tif (!img) { img = a1lib.captureHoldFullRs(); }\r\n\t\tif (!img) { return false; }\r\n\t\tvar sumpos = img.findSubimage(imgs.sumpoints);\r\n\t\tif (sumpos.length == 0) { return false; }\r\n\t\tvar hppos = img.findSubimage(imgs.lifepoints);\r\n\t\tif (hppos.length == 0) { hppos = img.findSubimage(imgs.lifepointspoison); }\r\n\t\tif (hppos.length == 0) { return false; }\r\n\r\n\t\tvar layout = null;\r\n\t\tfor (var a in ActionbarReader.layouts) {\r\n\t\t\tvar l = ActionbarReader.layouts[a];\r\n\t\t\tif (sumpos[0].x - hppos[0].x == l.sum.x - l.hp.x && sumpos[0].y - hppos[0].y == l.sum.y - l.hp.y) {\r\n\t\t\t\tlayout = l;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!layout) { return false; }\r\n\t\tthis.pos = {\r\n\t\t\tx: hppos[0].x - layout.hp.x,\r\n\t\t\ty: hppos[0].y - layout.hp.y,\r\n\t\t\tlayout: layout\r\n\t\t};\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tread(): LifeState;\r\n\tread(buffer: ImageData, bufx: number, bufy: number): LifeState;\r\n\tread(buffer?: ImageData, bufx?: number, bufy?: number): LifeState {\r\n\t\tif (!buffer) {\r\n\t\t\tbuffer = a1lib.capture(this.pos.x, this.pos.y, this.pos.layout.width, this.pos.layout.height);\r\n\t\t\tbufx = this.pos.x;\r\n\t\t\tbufy = this.pos.y;\r\n\t\t}\r\n\t\tvar dx = this.pos.x - bufx;\r\n\t\tvar dy = this.pos.y - bufy;\r\n\r\n\t\tvar hptext = this.readBarNumber(buffer, this.pos.layout.hp.x + dx, this.pos.layout.hp.y + dy, this.pos.layout.hor);\r\n\t\tvar drentext = this.readBarNumber(buffer, this.pos.layout.dren.x + dx, this.pos.layout.dren.y + dy, this.pos.layout.hor);\r\n\t\tvar sumtext = this.readBarNumber(buffer, this.pos.layout.sum.x + dx, this.pos.layout.sum.y + dy, this.pos.layout.hor);\r\n\t\tvar praytext = this.readBarNumber(buffer, this.pos.layout.pray.x + dx, this.pos.layout.pray.y + dy, this.pos.layout.hor);\r\n\t\tvar hpbar = this.readBar(buffer, this.pos.layout.hp.x + dx, this.pos.layout.hp.y + dy, this.pos.layout.hor);\r\n\t\tvar drenbar = this.readBar(buffer, this.pos.layout.dren.x + dx, this.pos.layout.dren.y + dy, this.pos.layout.hor);\r\n\t\tvar praybar = this.readBar(buffer, this.pos.layout.pray.x + dx, this.pos.layout.pray.y + dy, this.pos.layout.hor);\r\n\t\tvar sumbar = this.readBar(buffer, this.pos.layout.sum.x + dx, this.pos.layout.sum.y + dy, this.pos.layout.hor);\r\n\r\n\t\treturn {\r\n\t\t\thp: (hptext ? hptext.cur / hptext.max : hpbar),\r\n\t\t\tdren: (drentext ? drentext.cur / drentext.max : drenbar),\r\n\t\t\tsum: (sumtext ? sumtext.cur / sumtext.max : sumbar),\r\n\t\t\tpray: (praytext ? praytext.cur / praytext.max : praybar),\r\n\t\t\texacthp: hptext,\r\n\t\t\texactdren: drentext,\r\n\t\t\texactpray: praytext,\r\n\t\t\texactsum: sumtext\r\n\t\t};\r\n\r\n\t}\r\n\r\n\treadBarNumber(buffer: ImageData, x: number, y: number, hor: boolean) {\r\n\t\tif (hor) {\r\n\t\t\tvar line = OCR.readLine(buffer, chatfont, [255, 255, 255], x + 22, y + 5, true, false);\r\n\t\t\tvar m = line.text.match(/^(\\d+)(\\/(\\d+)|%)$/);\r\n\t\t\tif (m) { return { cur: +m[1], max: (m[2] == \"%\" ? 100 : +m[3]) }; }\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\treadBar(buffer: ImageData, x: number, y: number, hor: boolean) {\r\n\t\tif (hor) { x += 25; y += 11; }\r\n\t\telse { x += 7; y += 26; }\r\n\t\tvar width = this.pos.layout.barlength;\r\n\t\tfor (var b = 0; b < width; b++) {\r\n\t\t\tvar i = buffer.pixelOffset(x + (hor ? b : 0), y + (hor ? 0 : b));\r\n\t\t\tif (a1lib.ImageDetect.coldif(buffer.data[i], buffer.data[i + 1], buffer.data[i + 2], 35, 41, 44, 255) < 20) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn b / width;\r\n\t}\r\n}\r\n","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAAAXNSR0IDN8dNUwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAAG+SURBVChTY/gHBkcPLHqxVujvR2kQ+q0IRP/+QNGblwoWOmL6yiIMHz59e/HiFUI1qjoI+vVd0VpfgiEtORqo+va9x0DVJ08dvzCL9/MHxa+fkDT80wGi9++0GV6sEQKqBhoMMXvH8fNSIrxeliqeFkoP7yKUAhHD7/fSd2cKIqtetv+UtCgfUDUQPbqvjVD66500EJ2fyRscHnX16nUgev/v3+IVq6FmWyGZ+uuFEBC9vKwIlHPz8oWrnj17FkT1owdQgxl+PhcCohfXRICiQHuRVU+YNBnuEiBi+PFMGIi+PhZ2t9TwtNKSEuGHqAaGCTBkamuqLHWk3C00jDRkGb4/FQaib0+ED60WASoFqRYVMLVzBgYcxKPm+hL2+oKzZs1kACr6CkSPhT8/Et47XwZoAFC1tKiAuo4e0HNApdu3bQMioCUMlw5JfHkEUvfpgcjH+yIvzvNe3Cl4ZqvQ7m4hK01WYLAAgw8I9E3MGBxNNR6cF/v8EKTu3VWe15d4Xl7gfXKa7/p+gZkZgkC3As3rWLzeKSyRwdZQ2dlc49RmoffXeN5egSp9fIrv9lxBYHgBHQD0ZUZN6/+D8wAl/1An9Nob9AAAAABJRU5ErkJggg==\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAAAXNSR0IDN8dNUwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAAG3SURBVChTXZBdKINRHMbPjSvva/POR9rCOxe0ZGSkJS0kKTcU2pJJSdwrmksfpSSuttWIlELLLETJRxLy3RKLSPFOzeaz2Lw822lLTk+dc57nd/7nfw4Rw2N7fcIzx4kvcjHAhxSMyKlARBnif/kQhMf/dJjzOHjKAQBGWlsMmNzXd7B293ZOLOznG//1zl+OZWILExEAYESY5TDhHK29vHOkzWIgLGg9qKej/HtTTYJ++bU5/i9tW1htM/VGOUToRBSzSdAnh47NbG293uU6h3xhenhkFOuQOZ8ELoQGPFzAJ3++VWgymIqq6ihttVrUmkKY3ntVBBU4yO9O0KpkqPG3NgrnK9khoxIabORJcDvlS+A+nVyPqXtpcRGd0dr04TCbdIl9+nSjLpk4prrQaKchDRl+B5Vwb0FJGdb0Wdrc5Joi1moxExAoBsGdnJ4Bp8tLVaexmdk52MKkKTCCDP+CgS4bKtkHq+JqTXKxItkakharYmDSFBgprWsemLTjENra75f4XbFPZ8zjIXOzFTfWLoWJCAAw8rNhw4fjNO5C3692mfeU8Rwwt+NS/BdMvBLAz4btFxyHcjq4EwdjAAAAAElFTkSuQmCC\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAAAXNSR0IDN8dNUwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAADISURBVChTlY+xCsIwEIZv1AzVpIItCQVth7roJBXcOoqbdPYRfAB3n9q2/kk0jVULwgd3uf/LkVB9KxzNdVvl4TwIQJXPcPRT0ufL2oIe5Gp0jJnt/Yia88pHT98bh1bbUwb8qY9LCaU+LIAdfeLSTh2mU9tSDfC/ivc+1V38HaPqb93NDW33jBd2JTQKGUP5udishACNMiFQGvugnmdWIoIAjTZRlHIuJ9ruLy4VhnLKUiGg0T5JUJacZ8FYq842PYaIIBRSPgB1bfx4pGAPKgAAAABJRU5ErkJggg==\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAAAXNSR0IDN8dNUwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAADJSURBVChTY/j3jwOO7v/jiCpk8otl8IxkADKAXGRZhvf/uZERUNrRl8UnhhlNHIgYgHJoaP83ViBCEwQihvN/2YlEDBAziEEgpZteEEYgpRDWohsseBBEDUgpmgRWhFDad4EZD4IqLdsJ5XfuYsWKILJAZQyq+owZm5ngfDQEEQcqACpjsPFjUNAAqYbIARlwBBdR1GQEKmNwCmGw8WVQNmAIW4lQBEdAQaAUUAFQGYONN4NdIIOFB4OCDrpqIFdRByQFVGDjzQAACWgVv/wGZeYAAAAASUVORK5CYII=\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAAAXNSR0IDN8dNUwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAAE7SURBVChTlZLBSsNAFEXfnxTRYrUmmKbJSJqkoYYQY2xsKkhFpaALBRVauhDUtfmErtOFn2G7cuEHuHPjzk2/wNRbHhRFpfh4DJd7D8m8maHw8EQrhY7e9s2L0O7qUtwfvr5kE6xCbu5Ue/CRgiHmArsTu7dbZsf22s/jj7dsgtWptQKrCx8pGJpxsXunFusPT+/jLOOGLhejxuYN0+QZ51B151rIe0k6AjEraDjwkYIh37ryK5fry0Ey+MZxTenBCCkYUla2vcYZ//fXgo8UDGFSTPAXx4UUDOFcMO9cFMx/vrqWr7nR6dy9giFbOzaU/cKCmaTDnzQc+EjBkKUe4Bbs8tHqYvU+ffxKQ8OBj3R6W0KOma6UWks5wTvhhs7nBHykYEhVPKbRmhQJp4kJ+A1sGIEu7XIk5PgTn7mEboaNkmgAAAAASUVORK5CYII=\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAAAXNSR0IDN8dNUwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAAFUSURBVChTjZLPS8JgGMeff6ggupSnthGTaShkzpimW6AWS4ndogRv+QNtEkwhBmVURHTo6KmMsozoVt0Su9XBv6DZl16I6Af28PLy7Pv5vNueMVKFRphfX1OOSvFGRb9MeMu1s86D08e+5Ktspq6Rg8Ih5hUT7S3jsbzQloOZm97bs9PHrkyvmIu3yEHhkDF7gq663LXST6q4cdB67TkOW+gjkyZyUDiUjV6VUh1T78Y9dmH3AsZnoUeCHBQOZWP3WfUuxJnfPFbMBoVDQc6SlTx77q+FHDQULhAmxQR/eaxA4RC+C+YdqMKh6um/7yqNZ3zy6sB3hUNJ//Gce3tiRM/Vz3/aSJCDwiFtaifuP5z37vGj6Vy9+dX+8JrIQeFQkDdjHhsHopLtGlL3Wy8w2ELvGtYUtwUKh8QxI8DnI1INF2g4MYkJ2D8gCNoMX0QOGuDz7xrksXgBsv+oAAAAAElFTkSuQmCC\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAIAAACQKrqGAAAAAXNSR0IDN8dNUwAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAAGsSURBVChTPZFLKERhFIB/Owtm4bEx3Wk8rsc8jHlcaTDyGk02M8VsZkNsxEKUhQ2iSMRKxEjUJIuR2MkjUpOVMmU3pmZDkp0FmfHdfrmdTuc/5zvPK+q87SVG0/Thpac72D85t53+iiZfT1KfiZ9ce3jQ1uZvCQRdXb2Wlk5R7fGaKtWO8GBgaByUnNG1PfTxexba6fWZ7a7qxlYbqGp3wmm+zuGZdUmYq2qEyMNJB57Rx5eR1ajHHxK4aH2YeNu6SS+f3U3txCEojI0xf5NCMOgg4GJX91iEGSCysAFEeURCUv7QpYNjtFxr5eLxPyyJp2zuI6t/OorIceEy2ZwMIxgQEkX0WSmGRuSNSIAgBkTm9fs3a/QMjAn2AKUwF8C7HLvVd4rdMjFPEhb348VGU6W7ScgNKEkOtNwMmjMXFhmOHp6VGquqNeu/gOL8HsJACBA5JPdNzJYo5YrFYXZoVZ5mRDBfPJmhHRwEmcyKE11URl+v5MobNLF7eh4eHmMsyQFJjcfm1hSrA6ii3q1YXcIXiuQXGBKpV2KSkCinmNw8KjWrQMZae5lq+QVZqEZJW6ABRgAAAABJRU5ErkJggg==\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAGQAAAAICAYAAAAP1Fp1AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS41ZEdYUgAAAXdJREFUSEutkUFOxDAQBHNDiAMXxCP2wv/ypr3xQENHKtRpxrENe2g5nqnUOM7WWvvJ69t7Uz73j2MlzsCJIY/gPD3WXSQZxT0wFeceZ5NzF8wq9/T80pT7fjvWjOrKSeiybdu6gxkmRmH/V041IkZhvnPUM84oeLTCpAvOPfiTSxf7FY4LPy79u5c/Q+vxnguRcTDtq8Fw9OH/w9F3Ts/O5bmIM3CqJ5uc9/yd5HIu+xWOC+/9EGonYYrYO+McrFYGV5yYEed9n+8cHqJ+MiscdUVcNRMufdV3uMOd6lWXX9VOwhSxdyY5rbA9DgY+ufT4fOdgyJVvhlNNyfnJeX/kU88jXr3q8qvaLyFSAeydgROjdcR5/IAeDp9J54rPz9Xjss8+uVWfeopz1eVXtVI4c0AGw1xx5OpDVCdwyc76qI84elqdT27F54xWuOryq9pJKElGUmdWOA7mzOhDeEecnpOb9a1wzCI9btbnDD5deiZ/yn2/tS9RsmAHh6w6DgAAAABJRU5ErkJggg==\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAAcAAAAKCAYAAAB4zEQNAAAAn0lEQVQoU2P49yT9/78/xf9f7on4D2EnQzCQzfDvUdD//5/DIPhN+H8QHywGZDO82ODw/98z7/9/L/j9B7GBgAGEQWwGkOC/2x7/P++yg0vAMANI4t95ewwJEGb4e0gft+St+er//54x/P/ngA2QjyZ5oUfhP0g3SBJZAYjN8HuD6v9/uzT+w2hkDNYJwkvy+MD0vy0y/98vlAGyFf4DAO0Wz8YIdkkTAAAAAElFTkSuQmCC\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQCAYAAAAiYZ4HAAAAbklEQVQ4T2PgFxH7j4wXpHP/P9XEhxWD5FA0wBS7m4qgGALCIDGQHFwDPsUwDJIDayBGMQwzYFMMBAy4MAM2k9EVIWOwBmTFQ1UDSZ4mOVhBCtA1oStCxuQlDRjGpwkkBpJD0QDCME3Y8IJ07v8AAcyIFUxkCDUAAAAASUVORK5CYII=\")","import * as a1lib from \"@alt1/base\";\r\nimport * as OCR from \"@alt1/ocr\";\r\nimport ActionbarReader, { LifeState } from \"./actionbar\";\r\nimport { Rect, ImgRef, captureAsync } from \"@alt1/base\";\r\n\r\nexport interface AbilityInfoBare { id: string, icon: ImageData, cooldown: number };\r\n\r\nvar cdfont = require(\"@alt1/ocr/fonts/pixel_digits_8px_shadow.fontmeta.json\");\r\nvar hotkeyfont = require(\"@alt1/ocr/fonts/aa_8px_new.fontmeta.json\");\r\n\r\nvar imgs = a1lib.ImageDetect.webpackImages({\r\n\tsettingscog: require(\"./imgs/settingscog.data.png\"),\r\n\tsmallbarnumber: require(\"./imgs/smallbarnumber.data.png\"),\r\n\tactionbarnumbers: require(\"./imgs/actionbarnumbers.data.png\")\r\n});\r\n\r\nvar actionbarNumbers: StringMap<ImageData> = {};\r\n\r\nimgs.promise.then(() => {\r\n\tfor (var a = 0; a * 10 < imgs.actionbarnumbers.width; a++) {\r\n\t\tactionbarNumbers[a + 1] = imgs.actionbarnumbers.clone(new Rect(a * 10, 0, 10, 10));\r\n\t}\r\n});\r\n\r\ntype AbilBarId = \"bar0\" | \"bar1\" | \"bar2\" | \"bar3\" | \"bar4\";\r\ntype CaptAreas = Partial<{ [T in AbilBarId]: a1lib.RectLike }>;\r\n\r\nexport default class AbilityReader<T extends AbilityInfoBare> {\r\n\tbars: AbilityBar<T>[] = [];\r\n\tmainbar: AbilityBar<T> = null;\r\n\tbarstates: StringMap<AbilityLoadout<T>> = {};\r\n\tcaptureRect: a1lib.Rect = null;\r\n\tactionbarReader = new ActionbarReader();\r\n\tabilityimgs: T[] = null;\r\n\tlifestate: LifeState = null;\r\n\r\n\t//event when ocluded bar is visible again, before any further reading happens\r\n\thooks = {\r\n\t\tonbarshown: null as (bar: AbilityLoadout<T>) => any\r\n\t}\r\n\r\n\r\n\tstatic imgs = {\r\n\t\tsmallbarnumber: null as ImageData,\r\n\t\tsettingscog: null as ImageData\r\n\t};\r\n\r\n\tconstructor(abilityimgs: T[]) {\r\n\t\tthis.abilityimgs = abilityimgs;\r\n\t}\r\n\r\n\tfind(img?: a1lib.ImgRef) {\r\n\t\tif (!img) { img = a1lib.captureHoldFullRs(); }\r\n\r\n\t\tthis.bars = [];\r\n\t\tvar locs = img.findSubimage(imgs.smallbarnumber);\r\n\r\n\t\tvar cog = imgs.settingscog;\r\n\t\tfor (var loc of locs) {\r\n\t\t\tfor (var key in AbilityBar.types) {\r\n\t\t\t\tvar t = AbilityBar.types[key];\r\n\t\t\t\tif (!t.sec) { continue; }\r\n\t\t\t\tvar rect = new Rect(loc.x - t.detect.x + t.cog.x, loc.y - t.detect.y + t.cog.y, cog.width, cog.height);\r\n\t\t\t\tif (Rect.fromArgs(img).contains(rect)) {\r\n\t\t\t\t\tvar buf = img.read(loc.x - t.detect.x + t.cog.x, loc.y - t.detect.y + t.cog.y, cog.width, cog.height);\r\n\t\t\t\t\tif (buf.pixelCompare(cog) < 10) {\r\n\t\t\t\t\t\tvar bar = new AbilityBar(this, loc.x - t.detect.x, loc.y - t.detect.y, t, this.barstates);\r\n\t\t\t\t\t\tbar.overlay();\r\n\t\t\t\t\t\tthis.bars.push(bar);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.actionbarReader.find(img);\r\n\t\tif (this.actionbarReader.pos) {\r\n\t\t\tvar mainpos = this.actionbarReader.pos;\r\n\t\t\tvar t = AbilityBar.types[mainpos.layout.type];\r\n\r\n\t\t\tvar bar = new AbilityBar(this, mainpos.x - t.action.x, mainpos.y - t.action.y, AbilityBar.types[mainpos.layout.type], this.barstates);\r\n\t\t\tbar.overlay();\r\n\t\t\tthis.bars.unshift(bar);\r\n\t\t\tthis.mainbar = bar;\r\n\t\t}\r\n\r\n\r\n\t\tif (this.bars.length == 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tthis.captureRect = a1lib.Rect.fromArgs(this.bars[0].bounds);\r\n\t\tfor (var i = 1; i < this.bars.length; i++) {\r\n\t\t\tthis.captureRect.union(this.bars[i].bounds);\r\n\t\t}\r\n\r\n\t\treturn this.bars.length;\r\n\t}\r\n\r\n\tgetCaptAreas() {\r\n\t\tvar r: CaptAreas = {};\r\n\t\tfor (var b in this.bars) { r[\"bar\" + b] = this.bars[b].bounds; }\r\n\t\treturn r;\r\n\t}\r\n\r\n\t/**\r\n\t * @deprecated kinda needs rewrite to be efficient, use readallslotsinner manually instead\r\n\t * @param img \r\n\t */\r\n\treadAllSlots(img?: a1lib.ImgRef) {\r\n\t\tvar data: ImageData;\r\n\t\tif (img instanceof ImgRef) { data = img.toData(this.captureRect.x, this.captureRect.y, this.captureRect.width, this.captureRect.height); }\r\n\t\telse { data = a1lib.capture(this.captureRect.x, this.captureRect.y, this.captureRect.width, this.captureRect.height); }\r\n\t\tvar capts = {};\r\n\t\tvar captareas = {};\r\n\t\tfor (var a in this.bars) {\r\n\t\t\tcapts[\"bar\" + a] = data;\r\n\t\t\tcaptareas[\"bar\" + a] = this.captureRect;\r\n\t\t}\r\n\t\treturn this.readAllSlotsInner(capts, captareas);\r\n\t}\r\n\r\n\treadAllSlotsInner(capts: Partial<{ [T in AbilBarId]: ImageData }>, captareas: CaptAreas) {\r\n\t\tvar visiblebars: AbilityLoadout<T>[] = [];\r\n\t\tfor (var b in this.bars) {\r\n\t\t\tvar bar = this.bars[b];\r\n\t\t\tvar capt = capts[\"bar\" + b];\r\n\t\t\tvar captarea = captareas[\"bar\" + b];\r\n\t\t\tvar nr = bar.readBarNr(capt, captarea.x, captarea.y);\r\n\t\t\tif (!nr) { continue; }\r\n\t\t\tvar state = this.barstates[nr];\r\n\t\t\tvisiblebars.push(state);\r\n\t\t\tif (!state.visible && this.hooks.onbarshown) {\r\n\t\t\t\tthis.hooks.onbarshown(state);\r\n\t\t\t}\r\n\t\t\tfor (var a = 0; a < bar.slots.length; a++) {\r\n\t\t\t\tstate.slots[a].readAbility(capt, bar.slots[a].x - captarea.x, bar.slots[a].y - captarea.y);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (var id in this.barstates) {\r\n\t\t\tvar barstate = this.barstates[id];\r\n\t\t\tbarstate.visible = visiblebars.indexOf(this.barstates[id]) != -1\r\n\t\t}\r\n\t}\r\n\tfinishTick() {\r\n\t\tfor (var b in this.barstates) {\r\n\t\t\tvar bar = this.barstates[b];\r\n\t\t\tfor (var slot of bar.slots) {\r\n\t\t\t\tslot.lastcooldown = slot.cooldown;\r\n\t\t\t\tslot.lasttickcooldown = slot.tickcooldown\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treadLife(buffer: ImageData, bufx: number, bufy: number) {\r\n\t\tif (this.actionbarReader.pos == null) { return null; }\r\n\t\tthis.lifestate = this.actionbarReader.read(buffer, bufx, bufy);\r\n\t\treturn this.lifestate;\r\n\t}\r\n\r\n\toverlayState() {\r\n\t\talt1.overLaySetGroup(\"abildebug\");\r\n\t\talt1.overLayFreezeGroup(\"abildebug\");\r\n\t\talt1.overLayClearGroup(\"abildebug\");\r\n\r\n\t\tfor (var bar of this.bars) {\r\n\t\t\tvar state = this.barstates[bar.barid];\r\n\t\t\tif (state) {\r\n\t\t\t\tfor (var a = 0; a < bar.slots.length; a++) {\r\n\t\t\t\t\tstate.slots[a].overlayState(bar.slots[a].x, bar.slots[a].y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\talt1.overLayRefreshGroup(\"abildebug\");\r\n\t}\r\n\r\n\t*visibleAbilities() {\r\n\t\tfor (var bar of this.bars) {\r\n\t\t\tif (bar.barid) {\r\n\t\t\t\tyield* this.barstates[bar.barid].slots;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t*allAbilities() {\r\n\t\tfor (var barid in this.barstates) {\r\n\t\t\tvar bar = this.barstates[barid];\r\n\t\t\tyield* bar.slots;\r\n\t\t}\r\n\t}\r\n\t*mainbarAbilities() {\r\n\t\tif (this.mainbar) {\r\n\t\t\tvar bar = this.barstates[this.mainbar.barid];\r\n\t\t\tif (bar) { yield* bar.slots; }\r\n\t\t}\r\n\t}\r\n\t*allslots() {\r\n\t\tfor (var bar of this.bars) {\r\n\t\t\tyield* bar.slots;\r\n\t\t}\r\n\t}\r\n}\r\n\r\ninterface AbilityBarTypeMeta {\r\n\tsec: boolean,\r\n\tstep: { x: number, y: number },\r\n\trowstep: { x: number, y: number },\r\n\trowlen: number,\r\n\tlength: number,\r\n\tdetect: { x: number, y: number },\r\n\tcog?: { x: number, y: number },\r\n\taction?: { x: number, y: number },\r\n\tnum?: { x: number, y: number },\r\n\tid: string\r\n};\r\n\r\nclass AbilityBarSlot<T extends AbilityInfoBare> {\r\n\tx: number;\r\n\ty: number;\r\n\tindex: number;\r\n\tbar: AbilityBar<T>;\r\n\tconstructor(x: number, y: number, index: number, bar: AbilityBar<T>) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.index = index;\r\n\t\tthis.bar = bar;\r\n\t}\r\n\tgetState() {\r\n\t\treturn this.bar.barstates[this.bar.barid].slots[this.index];\r\n\t}\r\n}\r\n\r\ninterface AbilityLoadout<T extends AbilityInfoBare> {\r\n\tbarid: string;\r\n\tvisible: boolean;\r\n\tslots: AbilityState<T>[];\r\n}\r\n\r\n\r\nclass AbilityBar<T extends AbilityInfoBare> {\r\n\tstatic types: { [key: string]: AbilityBarTypeMeta } = {\r\n\t\tflat: { id: \"flat\", sec: true, step: { x: 36, y: 0 }, rowstep: { x: 0, y: 0 }, rowlen: 14, length: 14, cog: { x: 504, y: 17 }, detect: { x: 501, y: -2 }, num: { x: 503, y: 2 } },\r\n\t\thor: { id: \"hor\", sec: true, step: { x: 35, y: 0 }, rowstep: { x: 0, y: 35 }, rowlen: 7, length: 14, cog: { x: 245, y: 54 }, detect: { x: 242, y: -1 }, num: { x: 244, y: 3 } },\r\n\t\tver: { id: \"ver\", sec: true, step: { x: 0, y: 35 }, rowstep: { x: 35, y: 0 }, rowlen: 7, length: 14, cog: { x: 56, y: 245 }, detect: { x: -3, y: 242 }, num: { x: -1, y: 246 } },\r\n\t\ttower: { id: \"tower\", sec: true, step: { x: 0, y: 36 }, rowstep: { x: 0, y: 0 }, rowlen: 14, length: 14, cog: { x: 20, y: 504 }, detect: { x: -3, y: 501 }, num: { x: -1, y: 505 } },\r\n\r\n\t\tmainflat: { id: \"mainflat\", sec: false, step: { x: 36, y: 0 }, rowstep: { x: 0, y: 0 }, rowlen: 14, length: 14, detect: { x: 12, y: -29 }, action: { x: 54, y: -31 }, num: { x: 14, y: -25 } },\r\n\t\tmainhor: { id: \"mainhor\", sec: false, step: { x: 36, y: 0 }, rowstep: { x: 0, y: 36 }, rowlen: 7, length: 14, detect: { x: 10, y: -45 }, action: { x: 43, y: -47 }, num: { x: 12, y: -41 } },\r\n\t\tmainver: { id: \"mainver\", sec: false, step: { x: 0, y: 35 }, rowstep: { x: 35, y: 0 }, rowlen: 7, length: 14, detect: { x: 84, y: 232 }, action: { x: 75, y: 10 }, num: { x: 86, y: 236 } },\r\n\t\tmaintower: { id: \"maintower\", sec: false, step: { x: 0, y: 36 }, rowstep: { x: 0, y: 0 }, rowlen: 14, length: 14, detect: { x: 40, y: 15 }, action: { x: 43, y: 45 }, num: { x: 42, y: 19 } },\r\n\t};\r\n\r\n\tx: number;\r\n\ty: number;\r\n\tbounds: Rect;\r\n\tbarid: string;\r\n\tslots: AbilityBarSlot<T>[] = [];\r\n\tlayout: AbilityBarTypeMeta;\r\n\tbarstates: StringMap<AbilityLoadout<T>>;\r\n\treader: AbilityReader<T>;\r\n\r\n\tconstructor(reader: AbilityReader<T>, x: number, y: number, layout: AbilityBarTypeMeta, barstates: StringMap<AbilityLoadout<T>>) {\r\n\t\tthis.reader = reader;\r\n\t\tthis.layout = layout;\r\n\t\tthis.barstates = barstates;\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tvar bounds = new Rect(this.x + layout.num.x, this.y + layout.num.y, 10, 15);\r\n\t\tvar cx = x;\r\n\t\tvar cy = y;\r\n\t\tfor (var a = 0; a < layout.length; a++) {\r\n\t\t\tthis.slots.push(new AbilityBarSlot(cx, cy, a, this));\r\n\t\t\tbounds.union(new Rect(cx, cy, AbilityState.iconwidth, AbilityState.iconheight));\r\n\t\t\tcx += layout.step.x;\r\n\t\t\tcy += layout.step.y;\r\n\t\t\tif ((a + 1) % layout.rowlen == 0) {\r\n\t\t\t\tcx += layout.rowstep.x - layout.rowlen * layout.step.x;\r\n\t\t\t\tcy += layout.rowstep.y - layout.rowlen * layout.step.y;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!this.layout.sec) {\r\n\t\t\tvar mainlayout = ActionbarReader.layouts[layout.id];\r\n\t\t\tvar mainrect = new a1lib.Rect(x + layout.action.x, y + layout.action.y, mainlayout.width, mainlayout.height);\r\n\t\t\tmainrect.inflate(10, 10);\r\n\t\t\tbounds.union(mainrect);\r\n\t\t}\r\n\t\tthis.bounds = bounds;\r\n\t}\r\n\r\n\treadBarNr(buffer: ImageData, bufx: number, bufy: number) {\r\n\t\tvar match = \"\";\r\n\t\tfor (var a in actionbarNumbers) {\r\n\t\t\tvar m = buffer.pixelCompare(actionbarNumbers[a], this.x + this.layout.num.x - bufx, this.y + this.layout.num.y - bufy);\r\n\t\t\tif (m != Infinity) {\r\n\t\t\t\tmatch = a;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!match) { return \"\"; }\r\n\t\tthis.barid = match;\r\n\t\tif (!this.barstates[this.barid]) {\r\n\t\t\tthis.barstates[this.barid] = { barid: this.barid, slots: [], visible: false };\r\n\t\t\tfor (var b = 0; b < this.layout.length; b++) {\r\n\t\t\t\tthis.barstates[this.barid].slots[b] = new AbilityState(this.reader);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this.barid;\r\n\t}\r\n\r\n\toverlay() {\r\n\t\tif (a1lib.hasAlt1) {\r\n\t\t\talt1.overLayRect(a1lib.mixColor(255, 255, 255), this.bounds.x, this.bounds.y, this.bounds.width, this.bounds.height, 3000, 2);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class AbilityState<T extends AbilityInfoBare=AbilityInfoBare> {\r\n\tstatic iconwidth = 30 + 1;//the cooldown text overlays the box by one pixel\r\n\tstatic iconheight = 30 + 1;//also need one extra px here to read the hotkey\r\n\tstatic overlayState = false;\r\n\r\n\t//internal\r\n\tnextdetecttry = 0;//timestamp of next ability read attempt\r\n\r\n\t//stateful\r\n\tlastcooldown = -1;//cooldown at last confirmed tick\r\n\tlasttickcooldown = -1;//number of ticks cooldown on last comfirmed read\r\n\ttickcooldown = 0;//number of ticks left on cooldown\r\n\tcdchange = 0;//cd change since last tick\r\n\tgcd = true;//current cooldown is coused by global cooldown and is 1.8sec\r\n\tdonetime = 0;//timestamp of when cd will be done\r\n\thadcd = false;//has been on cooldown in the last minute\r\n\r\n\t//only function of pixel\r\n\tcooldown = 0;//current visible cooldown (whole sec)\r\n\tavailable = false;//false if the ability can't be used even when off cd (wrong weapon)\r\n\tcdfraction = -1;//fraction of cooldown completed as read by darker pixel clock\r\n\tability: T = null;//the detected ability \r\n\thotkey = \"\";//hotkey text of ability\r\n\r\n\r\n\treader: AbilityReader<T> = null;\r\n\r\n\tconstructor(reader: AbilityReader<T>) {\r\n\t\tthis.reader = reader;\r\n\t}\r\n\r\n\treadAbility(data: ImageData, x: number, y: number) {\r\n\t\tvar res = OCR.readLine(data, cdfont, [206, 213, 135], x + 31, y + 8, false, true);\r\n\t\tvar t = 0;\r\n\t\tif (res.text == \"\") {\r\n\t\t\t//don't trust a failed read as \"0\", only read it as 0 if we have a pixel match on the icon in the cd area\r\n\t\t\tvar allow = this.cooldown <= 1 || this.ability && this.confirmCdArea(data, x, y);\r\n\t\t\tt = (allow ? 0 : Math.ceil((this.lasttickcooldown - 1) * 0.6));\r\n\t\t}\r\n\t\telse if (res.text.endsWith(\"m\")) { t = 60 * +res.text.slice(0, -1); }\r\n\t\telse { t = +res.text; }\r\n\t\tvar now = Date.now();\r\n\t\tthis.cdchange = (this.lastcooldown != -1 ? t - this.lastcooldown : 0);\r\n\t\tthis.cooldown = t;\r\n\t\tif (this.cdchange >= 1) { this.gcd = this.cooldown <= 2; }\r\n\r\n\t\tif (this.cooldown != Math.ceil((this.lasttickcooldown - 1) * 0.6)) {\r\n\t\t\tvar tickcd = Math.floor(this.cooldown / 0.6);\r\n\t\t\t//detect 2nd tick in same second\r\n\t\t\tif (this.cooldown != 0 && this.cdchange == 0 && Math.ceil(tickcd * 0.6) == Math.ceil((tickcd - 1) * 0.6)) { tickcd--; }\r\n\t\t\tthis.tickcooldown = tickcd;\r\n\t\t} else {\r\n\t\t\tthis.tickcooldown--;\r\n\t\t}\r\n\t\tif (this.cooldown != 0) { this.donetime = now + this.cooldown * 1000; }\r\n\t\tthis.hadcd = this.donetime - now > -60 * 1000;\r\n\r\n\t\tthis.cdfraction = -1;\r\n\t\tthis.debug = null;\r\n\r\n\t\tif (!this.ability && this.nextdetecttry < now) {\r\n\t\t\tthis.ability = this.getAbility(data, x, y);\r\n\t\t\tthis.nextdetecttry = now + 1000 * 20 * (1 + Math.random());//5-10 sec delay to spread load\r\n\t\t}\r\n\t\tif (this.ability) {\r\n\t\t\tthis.readClock(data, x, y);\r\n\t\t\tif (!this.hotkey && this.available) {\r\n\t\t\t\tthis.readhotkey(data, x, y);\r\n\t\t\t}\r\n\t\t}\r\n\t\t//if (this.ability && this.ability.id == \"immortality\") { console.log(this.tickcooldown, this.cooldown, this.cdchange); }\r\n\t}\r\n\tconfirmCdArea(buffer: ImageData, x: number, y: number) {\r\n\t\tvar icon = this.ability.icon;\r\n\t\tfor (var dy = 1; dy < 10; dy++) {\r\n\t\t\tfor (var dx = 24; dx < 30; dx++) {\r\n\t\t\t\tvar i1 = (x + dx) * 4 + (y + dy) * 4 * buffer.width;\r\n\t\t\t\tvar i2 = dx * 4 + dy * 4 * icon.width;\r\n\t\t\t\t//calculate portion of icon color vs pure white per channel\r\n\t\t\t\tvar gradr = (255 - buffer.data[i1]) / (255 - icon.data[i2]);\r\n\t\t\t\tvar gradg = (255 - buffer.data[i1 + 1]) / (255 - icon.data[i2 + 1]);\r\n\t\t\t\tvar gradb = (255 - buffer.data[i1 + 2]) / (255 - icon.data[i2 + 2]);\r\n\t\t\t\t//if it's a pure mix of white and the icon, all channels will have the same portion of white\r\n\t\t\t\tvar d = Math.max(gradr, gradg, gradb) - Math.min(gradr, gradg, gradb);\r\n\t\t\t\tif (d > 0.25) { return false; }\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tdebug: ImageData = null;\r\n\treadClock(buf: ImageData, abilx: number, abily: number) {\r\n\t\tvar alpha = 0.20;\r\n\t\tvar size = 30;\r\n\t\tvar template = this.ability.icon;\r\n\t\tvar dirs = [\r\n\t\t\t{ n: size / 2, ox: size / 2, oy: 0, sx: 1, sy: 0 },\r\n\t\t\t{ n: size, ox: size - 1, oy: 1, sx: 0, sy: 1 },\r\n\t\t\t{ n: size, ox: size - 1, oy: size - 1, sx: -1, sy: 0 },\r\n\t\t\t{ n: size, ox: 0, oy: size - 1, sx: 0, sy: -1 },\r\n\t\t\t{ n: size / 2, ox: 0, oy: 0, sx: 1, sy: 0 }\r\n\t\t];\r\n\t\tvar pixels = 0;\r\n\t\tvar nbright = 0;\r\n\t\tvar nmatch = 0;\r\n\t\tvar lastbright = 0;\r\n\t\tvar streak = 10;\r\n\t\tvar lumpixels = 0;\r\n\t\tvar lummatch = 0;\r\n\t\tvar nwhite = 0;\r\n\t\tif (AbilityState.overlayState) { this.debug = new ImageData(30, 30); }\r\n\t\tfor (var dir of dirs) {\r\n\t\t\tfor (var a = 0; a < dir.n; a++) {\r\n\t\t\t\tvar x = dir.ox + a * dir.sx;\r\n\t\t\t\tvar y = dir.oy + a * dir.sy;\r\n\t\t\t\tvar i1 = (abilx + x) * 4 + (abily + y) * buf.width * 4;\r\n\t\t\t\tvar i2 = x * 4 + y * template.width * 4;\r\n\r\n\t\t\t\tvar lum = template.data[i2] + template.data[i2 + 1] + template.data[i2 + 2];\r\n\t\t\t\tvar imglum = buf.data[i1] + buf.data[i1 + 1] + buf.data[i1 + 2];\r\n\t\t\t\tvar d1 = Math.abs(buf.data[i1] - template.data[i2]) + Math.abs(buf.data[i1 + 1] - template.data[i2 + 1]) + Math.abs(buf.data[i1 + 2] - template.data[i2 + 2]);\r\n\t\t\t\tvar d2 = Math.abs(buf.data[i1] - template.data[i2] * alpha) + Math.abs(buf.data[i1 + 1] - template.data[i2 + 1] * alpha) + Math.abs(buf.data[i1 + 2] - template.data[i2 + 2] * alpha);\r\n\t\t\t\tvar match = d1 < 5 || d2 < 5;\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\tif (d1 < d2) {\r\n\t\t\t\t\t\tif (d2 >= 5) {\r\n\t\t\t\t\t\t\tstreak++;\r\n\t\t\t\t\t\t\tnbright++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (streak > 5) { lastbright = pixels; }\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse { streak = 0; }\r\n\t\t\t\t\tnmatch++;\r\n\t\t\t\t}\r\n\t\t\t\tif (lum > 30) {\r\n\t\t\t\t\tif (match) { lummatch++; }\r\n\t\t\t\t\tlumpixels++;\r\n\t\t\t\t}\r\n\t\t\t\tif (imglum > 70 * 3) {\r\n\t\t\t\t\tnwhite++;\r\n\t\t\t\t}\r\n\t\t\t\t//this.debug.setPixel(x, y, [d1, d2, 0, 255]);\r\n\t\t\t\tif (AbilityState.overlayState) { this.debug.setPixel(x, y, (d1 < 5 || d2 < 5 ? (d1 < d2 ? [255, 255, 255, 255] : [128, 128, 128, 255]) : [255, 0, 0, 255])); }\r\n\t\t\t\tpixels++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlastbright = Math.max(lastbright, nbright);\r\n\r\n\t\tthis.cdfraction = -1;\r\n\t\touter: for (var dir of dirs) {\r\n\t\t\tif (lastbright > dir.n) { lastbright -= dir.n; }\r\n\t\t\telse {\r\n\t\t\t\tvar x = dir.ox + dir.sx * lastbright - size / 2;\r\n\t\t\t\tvar y = dir.oy + dir.sy * lastbright - size / 2;\r\n\t\t\t\tif (AbilityState.overlayState) { this.debug.setPixel(x + size / 2, y + size / 2, [0, 255, 255, 255]); }\r\n\t\t\t\tvar angle = Math.atan2(y, x);\r\n\t\t\t\tthis.cdfraction = (1.25 + angle / Math.PI / 2) % 1;\r\n\t\t\t\tbreak outer;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar avail = false;\r\n\t\tif (lummatch / lumpixels > 0.5) {\r\n\t\t\tif (this.cooldown == 2 && this.cdchange != 0) { avail = true; }\r\n\t\t\telse if (this.cdfraction > 0.2) { avail = true; }\r\n\t\t\telse if (this.gcd && this.cooldown > 2) { avail = true; }\r\n\t\t\telse if (!this.gcd && this.cooldown > this.ability.cooldown * 0.6) { avail = true; }\r\n\t\t}\r\n\t\tif (avail) { this.available = true; }\r\n\t\telse if (nwhite / pixels < 0.7) { this.available = false; }//keep old value if the icon is flashed white\r\n\t}\r\n\r\n\treadhotkey(buf: ImageData, abilx: number, abily: number) {\r\n\t\tvar col = [255, 255, 255];\r\n\t\tvar line1 = OCR.readLine(buf, hotkeyfont, col, abilx + 2, abily + 26, true, false);\r\n\t\tif (line1.text) {\r\n\t\t\tvar line2 = OCR.readLine(buf, hotkeyfont, col, abilx + 2, abily + 15, true, false);\r\n\t\t\tif (line2.text) { this.hotkey = line2.text + \" \" + line1.text; }\r\n\t\t\telse { this.hotkey = line1.text; }\r\n\t\t}\r\n\t}\r\n\r\n\toverlayState(x: number, y: number) {\r\n\t\tif (this.available) {\r\n\t\t\tvar angle = (0.75 + this.cdfraction) * Math.PI * 2;\r\n\t\t\talt1.overLayLine(a1lib.mixColor(255, 0, 0), 1, x + 15, y + 15, x + 15 + Math.round(Math.cos(angle) * 15), y + 15 + Math.round(Math.sin(angle) * 15), 600);\r\n\t\t}\r\n\t\tif (!this.available) { alt1.overLayRect((this.ability ? a1lib.mixColor(255, 0, 0) : a1lib.mixColor(1, 1, 1)), x - 1, y - 1, 32, 32, 600, 1); }\r\n\t\talt1.overLayText(this.tickcooldown + \"\", a1lib.mixColor(255, 255, 0), 7, x, y, 600);\r\n\t\t//alt1.overLayText(this.matchpercent.toFixed(2), a1lib.mixColor(255, 255, 0), 7, x, y, 600);\r\n\t\t//alt1.overLayText(this.cdfraction.toFixed(2), a1lib.mixColor(255, 255, 0), 7, x, y + 15, 600);\r\n\t\t//if (this.cooldown != 0 && this.gcd) { alt1.overLayText(\"gcd\", a1lib.mixColor(255, 255, 0), 8, x, y, 600); }\r\n\t\t//alt1.overLayText(this.hotkey || \"?\", a1lib.mixColor(255, 255, 255), 11, x + 12, y + 12, 600);\r\n\t\t//if (this.debug) { alt1.overLayImage(x, y, a1lib.encodeImageString(this.debug), this.debug.width, 600); }\r\n\t}\r\n\r\n\tgetAbility(buf: ImageData, abilx: number, abily: number) {\r\n\t\tvar a = 0.20;\r\n\t\tvar best: T = null;\r\n\t\tvar bestscore = 30 * 30 * 10;\r\n\r\n\t\tfor (var abil of this.reader.abilityimgs) {\r\n\t\t\tvar icon = abil.icon;\r\n\t\t\tvar score = 0;\r\n\t\t\tfor (var x = 0; x < 30; x++) {\r\n\t\t\t\tfor (var y = 0; y < 30; y++) {\r\n\t\t\t\t\tvar i1 = (x + abilx) * 4 + (y + abily) * 4 * buf.width;\r\n\t\t\t\t\tvar i2 = x * 4 + y * 4 * icon.width;\r\n\t\t\t\t\tvar d1 = Math.abs(buf.data[i1] - icon.data[i2]) + Math.abs(buf.data[i1 + 1] - icon.data[i2 + 1]) + Math.abs(buf.data[i1 + 2] - icon.data[i2 + 2]);\r\n\t\t\t\t\tvar d2 = Math.abs(buf.data[i1] - icon.data[i2] * a) + Math.abs(buf.data[i1 + 1] - icon.data[i2 + 1] * a) + Math.abs(buf.data[i1 + 2] - icon.data[i2 + 2] * a);\r\n\t\t\t\t\tvar d = Math.min(d1, d2, 20);\r\n\t\t\t\t\tscore += d;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (score < bestscore) {\r\n\t\t\t\tbestscore = score;\r\n\t\t\t\tbest = abil;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn best;\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__alt1_base__;","module.exports = __WEBPACK_EXTERNAL_MODULE__alt1_ocr__;"],"sourceRoot":""}