{"version":3,"sources":["webpack://BuffsReader/webpack/universalModuleDefinition","webpack://BuffsReader/webpack/bootstrap","webpack://BuffsReader/./imgs/buffborder.data.png","webpack://BuffsReader/./imgs/debuffborder.data.png","webpack://BuffsReader/./index.ts","webpack://BuffsReader/external {\"root\":\"A1lib\",\"commonjs\":\"@alt1/base\",\"commonjs2\":\"@alt1/base\",\"amd\":\"@alt1/base\"}","webpack://BuffsReader/external {\"root\":\"OCR\",\"commonjs\":\"@alt1/ocr\",\"commonjs2\":\"@alt1/ocr\",\"amd\":\"@alt1/ocr\"}"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@alt1/base\"), require(\"@alt1/ocr\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@alt1/base\", \"@alt1/ocr\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@alt1/buffs-reader\"] = factory(require(\"@alt1/base\"), require(\"@alt1/ocr\"));\n\telse\n\t\troot[\"BuffsReader\"] = factory(root[\"A1lib\"], root[\"OCR\"]);\n})((typeof self!='undefined'?self:this), function(__WEBPACK_EXTERNAL_MODULE__alt1_base__, __WEBPACK_EXTERNAL_MODULE__alt1_ocr__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAAOklEQVRIS+3NQQ0AIAzF0NmYNYRhdxA89F9ok3durd2T9qa3SnGKcopyinKKcopyinKKcor6cJrVcwDOR2Z9uA13TQAAAABJRU5ErkJggg==\")","module.exports=require(\"@alt1/base\").ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAAOElEQVRIS+3NuREAMBDCQPqvzT2dnx5EYjGzpMpKpu1Fz+5VGEUZRRlFGUUZRRlFGUUZRX0Y7cpsGBdLzbBQD6EAAAAASUVORK5CYII=\")","import * as a1lib from \"@alt1/base\";\r\nimport * as OCR from \"@alt1/ocr\";\r\nimport { ImageData, ImgRef } from \"@alt1/base\";\r\n\r\nvar imgs = a1lib.ImageDetect.webpackImages({\r\n\tbuff: require(\"./imgs/buffborder.data.png\"),\r\n\tdebuff: require(\"./imgs/debuffborder.data.png\"),\r\n});\r\n\r\nvar font = require(\"../ocr/fonts/pixel_digits_8px_shadow.fontmeta.json\");\r\n\r\nfunction negmod(a, b) {\r\n\treturn ((a % b) + b) % b;\r\n}\r\n\r\n\r\nexport type BuffTextTypes = \"time\" | \"timearg\" | \"arg\";\r\n\r\n\r\nexport class Buff {\r\n\tisdebuff: boolean;\r\n\tbuffer: ImageData;\r\n\tbufferx: number;\r\n\tbuffery: number;\r\n\tconstructor(buffer: ImageData, x: number, y: number, isdebuff: boolean) {\r\n\t\tthis.buffer = buffer;\r\n\t\tthis.bufferx = x;\r\n\t\tthis.buffery = y;\r\n\t\tthis.isdebuff = isdebuff;\r\n\t}\r\n\treadArg(type: BuffTextTypes) {\r\n\t\treturn BuffReader.readArg(this.buffer, this.bufferx + 2, this.buffery + 24, type);\r\n\t}\r\n\treadTime() {\r\n\t\treturn BuffReader.readTime(this.buffer, this.bufferx + 2, this.buffery + 24);\r\n\t}\r\n\tcompareBuffer(img: ImageData) {\r\n\t\treturn BuffReader.compareBuffer(this.buffer, this.bufferx + 1, this.buffery + 1, img);\r\n\t}\r\n\tcountMatch(img: ImageData, aggressive?: boolean) {\r\n\t\treturn BuffReader.countMatch(this.buffer, this.bufferx + 1, this.buffery + 1, img, aggressive);\r\n\t}\r\n}\r\n\r\nexport default class BuffReader {\r\n\tpos: { x: number, y: number } = null;\r\n\tdebuffs = false;\r\n\r\n\tfind(img?: ImgRef) {\r\n\t\tvar gridsize = 30;\r\n\t\tif (!img) { img = a1lib.captureHoldFullRs(); }\r\n\t\tif (!img) { return null; }\r\n\t\tvar poslist = img.findSubimage(this.debuffs ? imgs.debuff : imgs.buff);\r\n\t\tif (poslist.length == 0) { return null; }\r\n\t\tvar grids = [];\r\n\t\tfor (var a in poslist) {\r\n\t\t\tvar ongrid = false;\r\n\t\t\tfor (var b in grids) {\r\n\t\t\t\tif (negmod(grids[b].x - poslist[a].x, gridsize) == 0 && negmod(grids[b].x - poslist[a].x, gridsize) == 0) {\r\n\t\t\t\t\tgrids[b].x = Math.min(grids[b].x, poslist[a].x);\r\n\t\t\t\t\tgrids[b].y = Math.min(grids[b].y, poslist[a].y);\r\n\t\t\t\t\tgrids[b].n++;\r\n\t\t\t\t\tongrid = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!ongrid) { grids.push({ x: poslist[a].x, y: poslist[a].y, n: 1 }); }\r\n\t\t}\r\n\t\tvar max = 0, above2 = 0, best = null;\r\n\t\tfor (var a in grids) {\r\n\t\t\tconsole.log(\"buff grid [\" + grids[a].x + \",\" + grids[a].y + \"], n:\" + grids[a].n);\r\n\t\t\tif (grids[a].n > max) { max = grids[a].n; best = grids[a]; }\r\n\t\t\tif (grids[a].n >= 2) { above2++; }\r\n\t\t}\r\n\t\tif (above2 > 1) { console.log(\"Warning, more than one possible buff bar location\"); }\r\n\t\tthis.pos = { x: best.x, y: best.y };\r\n\t\treturn true;\r\n\t}\r\n\tgetCaptRect() {\r\n\t\treturn new a1lib.Rect(this.pos.x, this.pos.y, 180, 90);\r\n\t}\r\n\tread(buffer?: ImageData) {\r\n\t\tvar r: Buff[] = [];\r\n\t\tvar rect = this.getCaptRect();\r\n\t\tif (!buffer) { buffer = a1lib.capture(rect.x, rect.y, rect.width, rect.height); }\r\n\t\tfor (var i = 0; i < 18; i++) {\r\n\t\t\tvar x = i % 6 * 30;\r\n\t\t\tvar y = Math.floor(i / 6) * 30;\r\n\t\t\tvar match = buffer.pixelCompare((this.debuffs ? imgs.debuff : imgs.buff), x, y) != Infinity;\r\n\t\t\tif (!match) { break; }\r\n\t\t\tr.push(new Buff(buffer, x, y, this.debuffs));\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\tstatic compareBuffer(buffer: ImageData, ox: number, oy: number, buffimg: ImageData) {\r\n\t\tvar r = BuffReader.countMatch(buffer, ox, oy, buffimg, true);\r\n\t\tif (r.failed > 0) { return false; }\r\n\t\tif (r.tested < 50) { return false; }\r\n\t\treturn true;\r\n\t}\r\n\r\n\tstatic countMatch(buffer: ImageData, ox: number, oy: number, buffimg: ImageData, agressive?: boolean) {\r\n\t\tvar r = { tested: 0, failed: 0, skipped: 0, passed: 0 };\r\n\t\tvar data1 = buffer.data;\r\n\t\tvar data2 = buffimg.data;\r\n\t\t//var debug = new ImageData(buffimg.width, buffimg.height);\r\n\t\tfor (var y = 0; y < buffimg.height; y++) {\r\n\t\t\tfor (var x = 0; x < buffimg.width; x++) {\r\n\t\t\t\tvar i1 = buffer.pixelOffset(ox + x, oy + y);\r\n\t\t\t\tvar i2 = buffimg.pixelOffset(x, y);\r\n\r\n\t\t\t\t//debug.data[i2] = 255; debug.data[i2 + 1] = debug.data[i2 + 2] = 0; debug.data[i2 + 3] = 255;\r\n\t\t\t\tif (data2[i2 + 3] != 255) { r.skipped++; continue; }//transparent buff pixel\r\n\t\t\t\tif (data1[i1] == 255 && data1[i1 + 1] == 255 && data1[i1 + 2] == 255) { r.skipped++; continue; }//white pixel - part of buff time text\r\n\t\t\t\tif (data1[i1] == 0 && data1[i1 + 1] == 0 && data1[i1 + 2] == 0) { r.skipped++; continue; }//black pixel - part of buff time text\r\n\r\n\t\t\t\tvar d = a1lib.ImageDetect.coldif(data1[i1], data1[i1 + 1], data1[i1 + 2], data2[i2], data2[i2 + 1], data2[i2 + 2], 255);\r\n\t\t\t\tr.tested++;\r\n\t\t\t\t//debug.data[i2] = debug.data[i2 + 1] = debug.data[i2 + 2] = d * 10;\r\n\t\t\t\tif (d > 35) {\r\n\t\t\t\t\t//qw(pixelschecked); debug.show();\r\n\t\t\t\t\tr.failed++;\r\n\t\t\t\t\tif (agressive) { return r; }\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tr.passed++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//debug.show(); qw(pixelschecked);\r\n\t\treturn r;\r\n\t}\r\n\r\n\r\n\tstatic isolateBuffer(buffer: ImageData, ox: number, oy: number, buffimg: ImageData) {\r\n\t\tvar count = BuffReader.countMatch(buffer, ox, oy, buffimg);\r\n\t\tif (count.passed < 50) { return; }\r\n\r\n\t\tvar removed = 0;\r\n\t\tvar data1 = buffer.data;\r\n\t\tvar data2 = buffimg.data;\r\n\t\t//var debug = new ImageData(buffimg.width, buffimg.height);\r\n\t\tfor (var y = 0; y < buffimg.height; y++) {\r\n\t\t\tfor (var x = 0; x < buffimg.width; x++) {\r\n\t\t\t\tvar i1 = buffer.pixelOffset(ox + x, oy + y);\r\n\t\t\t\tvar i2 = buffimg.pixelOffset(x, y);\r\n\r\n\t\t\t\t//debug.data[i2] = 255; debug.data[i2 + 1] = debug.data[i2 + 2] = 0; debug.data[i2 + 3] = 255;\r\n\t\t\t\tif (data2[i2 + 3] != 255) { continue; }//transparent buff pixel\r\n\t\t\t\t//==== new buffer has text on it ====\r\n\t\t\t\tif (data1[i1] == 255 && data1[i1 + 1] == 255 && data1[i1 + 2] == 255 || data1[i1] == 0 && data1[i1 + 1] == 0 && data1[i1 + 2] == 0) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//==== old buf has text on it, use the new one ====\r\n\t\t\t\tif (data2[i2] == 255 && data2[i2 + 1] == 255 && data2[i2 + 2] == 255 || data2[i2] == 0 && data2[i2 + 1] == 0 && data2[i2 + 2] == 0) {\r\n\t\t\t\t\tdata2[i2 + 0] = data1[i1 + 0];\r\n\t\t\t\t\tdata2[i2 + 1] = data1[i1 + 1];\r\n\t\t\t\t\tdata2[i2 + 2] = data1[i1 + 2];\r\n\t\t\t\t\tdata2[i2 + 3] = data1[i1 + 3];\r\n\t\t\t\t\tremoved++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar d = a1lib.ImageDetect.coldif(data1[i1], data1[i1 + 1], data1[i1 + 2], data2[i2], data2[i2 + 1], data2[i2 + 2], 255);\r\n\t\t\t\t//debug.data[i2] = debug.data[i2 + 1] = debug.data[i2 + 2] = d * 10;\r\n\t\t\t\tif (d > 0) {\r\n\t\t\t\t\t//qw(pixelschecked); debug.show();\r\n\t\t\t\t\tdata2[i2 + 0] = data2[i2 + 1] = data2[i2 + 2] = data2[i2 + 3] = 0;\r\n\t\t\t\t\tremoved++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t//debug.show(); qw(pixelschecked);\r\n\t\tif (removed > 0) { console.log(removed + \" pixels remove from buff template image\"); }\r\n\t}\r\n\r\n\tstatic readArg(buffer: ImageData, ox: number, oy: number, type: BuffTextTypes) {\r\n\t\tvar lines: string[] = [];\r\n\t\tfor (var dy = -10; dy < 10; dy += 10) {//the timer can be spread to a second line at certain times (229m)\r\n\t\t\tvar result = OCR.readLine(buffer, font, [255, 255, 255], ox, oy + dy, true);\r\n\t\t\tif (result.text) { lines.push(result.text); }\r\n\t\t}\r\n\t\tvar r = { time: 0, arg: \"\" };\r\n\t\tif (type == \"timearg\" && lines.length > 1) { r.arg = lines.pop(); }\r\n\t\tvar str = lines.join(\"\");\r\n\t\tif (type == \"arg\") {\r\n\t\t\tr.arg = str;\r\n\t\t} else {\r\n\t\t\tvar m;\r\n\t\t\tif (m = str.match(/^(\\d+)h$/)) { r.time = +m[1] * 60 * 60; }\r\n\t\t\telse if (m = str.match(/^(\\d+)m$/)) { r.time = +m[1] * 60; }\r\n\t\t\telse if (m = str.match(/^(\\d+)$/)) { r.time = +m[1]; }\r\n\t\t}\r\n\t\treturn r;\r\n\t}\r\n\r\n\tstatic readTime(buffer: ImageData, ox: number, oy: number) {\r\n\t\treturn this.readArg(buffer, ox, oy, \"time\").time;\r\n\t}\r\n\r\n\tstatic matchBuff(state, buffimg: ImageData) {\r\n\t\tfor (var a in state) {\r\n\t\t\tif (state[a].compareBuffer(buffimg)) { return state[a]; }\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic matchBuffMulti(state, buffinfo) {\r\n\t\tif (buffinfo.final) {//cheap way if we known exactly what we're searching for\r\n\t\t\treturn BuffReader.matchBuff(state, buffinfo.imgdata);\r\n\t\t}\r\n\t\telse {//expensive way if we are not sure the template is final\r\n\t\t\tvar bestindex = -1;\r\n\t\t\tvar bestscore = 0;\r\n\t\t\tif (buffinfo.imgdata) {\r\n\t\t\t\tfor (var a = 0; a < state.length; a++) {\r\n\t\t\t\t\tvar count = BuffReader.countMatch(state[a].buffer, state[a].bufferx + 1, state[a].buffery + 1, buffinfo.imgdata, false);\r\n\t\t\t\t\tif (count.passed > bestscore) {\r\n\t\t\t\t\t\tbestscore = count.passed;\r\n\t\t\t\t\t\tbestindex = a;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (bestscore < 50) { return null; }\r\n\r\n\t\t\t//update the isolated buff\r\n\t\t\tBuffReader.isolateBuffer(state[bestindex].buffer, state[bestindex].bufferx + 1, state[bestindex].buffery + 1, buffinfo.imgdata);\r\n\r\n\t\t\treturn state[bestindex];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class BuffInfo {\r\n\timgdata: ImageData;\r\n\tname: string;\r\n\tbuffid: string;\r\n\tfinal: boolean;\r\n\tisdebuff: boolean;\r\n\r\n\tstatic buffs = {\r\n\t\tfamiliar: { n: \"Familiar\", img: null, isdebuff: false },\r\n\t\tadren: { n: \"Adrenaline potion\", img: null, isdebuff: true },\r\n\t\toverload: { n: \"Overload\", img: null, isdebuff: false },\r\n\t\tperfectplus: { n: \"Perfect plus\", img: null, isdebuff: false },\r\n\t\tprayrenewal: { n: \"Prayer renewal\", img: null, isdebuff: false },\r\n\t\taggression: { n: \"Aggression potion\", img: null, isdebuff: false }\r\n\t};\r\n\r\n\tconstructor(imgdata, name, id, final, debuff) {\r\n\t\tthis.imgdata = imgdata;\r\n\t\tthis.name = name;\r\n\t\tthis.buffid = id;\r\n\t\tthis.final = final;\r\n\t\tthis.isdebuff = debuff;\r\n\t}\r\n\r\n\ttoJSON() {\r\n\t\tif (this.buffid != \"\") { return { buffid: this.buffid }; }\r\n\t\telse { return { name: this.name, final: this.final, buffid: \"\", imgstr: this.imgdata.toJSON(), isdebuff: this.isdebuff }; }\r\n\t}\r\n\r\n\tstatic fromPreset(buffid) {\r\n\t\tvar buffmeta = BuffInfo.buffs[buffid];\r\n\t\treturn new BuffInfo(buffmeta.img, buffmeta.n, buffid, true, buffmeta.isdebuff);\r\n\t}\r\n\r\n\tstatic fromObject(obj) {\r\n\t\tif (typeof obj != \"object\" || obj == null) { return null; }\r\n\t\tif (typeof obj.buffid == \"string\" && obj.buffid != \"\") {\r\n\t\t\tif (!(obj.buffid in BuffInfo.buffs)) { return null; }\r\n\t\t\treturn BuffInfo.fromPreset(obj.buffid);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//fix the image\r\n\t\t\tvar name = (typeof obj.name == \"string\" ? obj.name : \"Unknown buff\");\r\n\t\t\tvar isdebuff = !!obj.isdebuff;\r\n\t\t\tvar final = !!obj.final;\r\n\t\t\tvar r = new BuffInfo(null, name, \"\", final, isdebuff);\r\n\r\n\t\t\tvar imgdata;\r\n\t\t\tif (obj.imgdata instanceof ImageData) { r.imgdata = obj.imgdata; }\r\n\t\t\telse if (typeof obj.imgstr == \"string\") { a1lib.ImageDetect.imageDataFromBase64(obj.imgstr).then(i => r.imgdata = i); }\r\n\t\t\telse { return null; }\r\n\t\t\treturn r;\r\n\t\t}\r\n\t}\r\n}\r\n\r\na1lib.ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAB6UlEQVRIS72UPUsDQRRF0woi2FiIIoJgYyo/moCVoCBGEMFCsLNSJIJ/QGIVGxG1l1goaGGXSoyFKIi/QOyttLATMu4Z89bdl5fsWqzFYWbu7t6b92YmOefcv2GKWWGKWWGKmsvXz2CIa5vl/RYtCVPUHF3duO2Ds2D6sy5ubLnCzHy4TospaorlPTe1tBIGRoP/gilqCBvMTzoqIghK1xfOam8nTFEzlh93hYV1t1za9SEE9/YN+XBarN9vhylGwZgQquFQYM66u6vHh6Lv1O7dcf0peN32EExRwKxyeu6qD42wfRJMgCDPFitVP57UG+7w5cP1D4wENr9+MfMoo4VZN7e65oOoyJ/AZisxZB+ZM7KmMkLYR7h9+wps4p6xRRTCCOGIUyHIHmEcRQLg+b3hYa49YwuBiggjiBGGpydCYx1AFVG0n9Ai+NYEFXCvCGUuVREiF1yMJUz7WJgiyJ4QKi0lDF32icMjVervLUwR5BD4gxG0E2M/Dw4JIz9Ef5OEKQJhXGBGqpMTKScQ9DdJmCL7IkhFfv+a7QOe6e+SMEX2AWQtLSUYJCz6ThpMUYNpNID2ZhYGGEuABPPvot/rhClaECJQmX6eBlNsR+3u0d+pv1YkmGISaS+xxhSzwhSzwhSzweW+AbQ+QlX0mRk7AAAAAElFTkSuQmCC\")\r\n\t.then(i => BuffInfo.buffs.familiar.img = i);\r\na1lib.ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAIAAAACtmMCAAACCElEQVRIS7XWX0vTcRTH8QkSyFwhKSpY0YVg4Gihc6JsiUoWmVYIEsIEUW/U+edG8EKQwJtChJ5AF130PLz2CXTbg/DW9/jI2fH85lai8GF8PTvnxfntN7elStnM/FBaWZt4cLuYgJZqYO3NtjVIaCaiqqKv+pnj+Q6SSrX4UPE9xI9HUR2CjFs/LHzfzpGTo7GNpWGhShKtivZHkjtdroo/j/MEDlQidWJtAb0SA6cZE+GSIrF+j0bRugnDb5fKyrtPH8j49Pvi5Jub0CjqCWslTK6slhVDRwslL5I6oi2YFCsHe0QoHOfB7FAQiUSh18TQRxjePf2lbH79NvJ5MckRbXNNVCn0ES8u7Bzdl/hj51Fo+1fRcxK5P7ffkUndliByr/tbu3yn0lxkbPt5jsxtVOC4LYizxS8q7pd6fbPGG4ni/kxOEaFa0IrlJ6+Ysv7mYnvbQ2b+vsxfvC6ePctx5mJ55EyF+lbn4/8QeQW5RvYyQqg/h/+cOqJQE3UrQGe6eiBYSuFMBS68McXVRL+mFpTIgVsBYaI4XlDCp4ZQDdYRhdqCDXbEQrQ1TRR1owhX6B74nR4A4hHIztRLIx8RtaZfsCYG1LjzzqciuNhQ0YdQ4Ejte0ZPKLS+6EszSThwjXo/+iI91m9c/OYi1iRUkz5WtE4/fiUG1GJP+eGm/Xf9myKbuQSEJ1EoVwG7xAAAAABJRU5ErkJggg==\")\r\n\t.then(i => BuffInfo.buffs.adren.img = i);\r\na1lib.ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAIAAAACtmMCAAABUUlEQVRIS73WMUvDUBSG4Ti2Rh38CV0tCFYUQZEMYgehzsUOIigUFFwENwedxM3dn+p3ecPxeHMT01gK7xTOeThTkmxQ9IeTnEbTLXV6m7eMeWWCtKxqjefrk6demzTpdagg1llXrxsqy9Z8PPRj2oIGDWKdBff+sKs+Xo7UfDoyVPkVbgoiB5po06T9r7d9lRSJRTuzFJPc3ec2IpwuRdRzsknWSzF5IAtaPp/OaHx5QcfFWRVlnTODmOSUNq9vZhbi4cFJ3ZmtxPvnR+XFneGeF5UtCkmIflRpOe9t+iKOEiKPli9Gc2rJYpVT3cUkR3XoasUGjiKU9ZWIoH9y5NGE6M/sJoIkxJYcgbL4S/TvnkVFOEQ58ftRLSQqUHbl/IjdzvQcr7IgVr8zLVHPKSGq/HJxZuRqoTmbVHZgKXo0cpsDIrgg/uefQrFiwqDofwPpgNSSjcGGfQAAAABJRU5ErkJggg==\")\r\n\t.then(i => BuffInfo.buffs.overload.img = i);\r\na1lib.ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAC80lEQVRIS72U60uTYRiHRXQrKNLU5tw8b842D0PNch86mrY2c6OZTpunFMlzSbZVamYpHpIwTxSJkkUgiqGVGqF+SAkJqUjI/phf96tEY9xu+aE+XDzPe90n7r3bvAD8N1j5r2DlTjybtNPBx/4GVrqj8EYJHXzME6x0R5Stng4+5glW7kT8nX5EFzfSlY97gpUcurFpxDkeQW1/TI98jidYyRHfMogQw2XIs0twuKGXFJ/nDlZyxNR0QHQwmK7wiq3rhDhg+74bWOmKbmwKqvo/A5SVbTRYsnXfDazkiKlrR3znOJIGJhGQdpYUn+cOVnIk9c8ieXgeEf/jq69pG0FEyU1Eld+mRz7HE6x0JbHnFSLLmiDyPwRN61NSfJ4nWOmKumkIYXk18NnvD23vJJRVD0jzue5gpSvq5gF6V7XwCVchsWuCvpndCLtYTiE+fydYKaC63gNVw0MoajsRfcUBGf2YRXEpSLg3ilPjq0hpHYbMXEqpfD0HKwWU1e1Q1tOw6g5EltohNRZCY++DceYLMp4v4cTgNI60DEBhraR0vocrrBQINZchvNiBsKJGKCvvQmqpgH7qE7LnNmB4vY7MF8s4SQO11+5DrEmmEr6PM6wUkF0ogkRfAMm5AoTn1yA05ypMb9ZgWdyE+d1XGCc+Iv3JDFIdPfBLOEolfB9nWCkgzy6G9Pz2MJkhH5LMXGTPrCBv+SdyFr7DNL2GzJG3SGvuQ5BWRyV8H2dYKSA30TD6l5cZbbQhDcu4BBMNswrD3m/APPMZ+tE56GjYXu0xKuH7OMNKAVlWIeRZNsgEjMKGuVvDhM0sC9vDhM1Sb3VDrNZSCd/HGVb+RmqwIZi2C6GPU6q3wjS7irylTVjmv8E0uYL0oSkkVDTCd98BSud7OMNKZ4LOWGirfHp/VphpWO6HH3Suw/hyEce7RhF62khpfK0rrHRFFBgCcaAUCkspYgvroCiogiKnHH5KDYX5Gg5WusPbdw+8fcVbuMbcA69fyI/29WmtmR0AAAAASUVORK5CYII=\")\r\n\t.then(i => BuffInfo.buffs.perfectplus.img = i);\r\na1lib.ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAADRElEQVRIS7WV60uUURDGt/8iCPKDEBkZpGl+yMjVIjWUXJYyL2gaWl6QLpaZlqwKaWblWpurFKGoZUmmqLFlYkIraBZZeAnMlNLIwCzM0Kedcc9e311dqw/P8r5zZua3M2fOeWUAViWZbI3hxyzbdSlJGpeTAMTnqBGVq10xUNLoTCJxXF4VKrs/oujxCA4dL14RUNLoTAJ0rWscX+aAsdlFlHRNQJmR/39hBHo/s4gCQ3UxWerVwShIyNFadOYVBlIbBUjK31L2BmNQVLrKYQJhpwGJP69x6Gcr6xdjUHhyDi639MMr6KDDRMLuaF1K5gdjkDzqFE5Ud0PbOYLIwnrsCIlzKaEzLf0YkwXEZqFMN4SKnim0DM3ynpzWNMNnX+w/AZpAEWn5XBGBaMJorPWf5lHYMYZ0bRuv/y2QYTQMVw17RIe0bWQW338DC4tgaG3/V2h0g8i71Y6AvdGSMPEnhGzXhUyO/opkHL7Riuv6SfR+nmfQkw9zONf0DopcDTx890gmE7Zj+ZUIVCZJ+ghZBciVKcjStuOibpQrItDJskZs3BYsmUTYvAMV3JnU0jq4efhJ+rK/6cHosHmnEqnqZh6UiMxyePqFSAYLG4FiVHd4enPqX2B3Yi7cPeXSMVYvRgeqsPBu97KgxDOlfOtn1L5Edd8UVE1vcORmB1/MYn8tY00JTAajQ1h0mp2z5Tp1gCqqez3NR+T5+C8G3tZPoOhBDx8jn/ADVjmsQELCQTjZ2n1DExB76R7S63t5oAamFzD5c+kL8HT0B842D/NaaGoBdgWau2MFWU4UQFNX9qiX94gqoYoIREeFRGC6EGid/LLLG8xdkkrqSBRA+5lR2gDV/T6+8evfznBFAkZwaivt34WaLv46bPUxTrNUUkfiAIPozCly1Uip0XN1zwytG/y2wCA6m9RGavP2yKNYu37TEshVGEkEesoV/K+LH/Zxcrp5qKL81mEeENrXde7eJhDHWiZaqUSCoLAEnrqUqi6+6vIaX3FF1Opgw41kCeI48eCqRCI6wDR1FboBZFd3wn9/kl1FphjLF1clEm7wkvMlQF9uN/ctkiD2tzW4KpE4ObuEry5HIJKdYTUSAGcgALI/e5pKefLwVWwAAAAASUVORK5CYII=\")\r\n\t.then(i => BuffInfo.buffs.prayrenewal.img = i);\r\na1lib.ImageDetect.imageDataFromBase64(\"iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAClklEQVRIS72W/UtTYRTHDyTZL+ElqH6QCswKAq2cL7hmL6ai4pZTCbTMDB1aips236Z3253CdvdKpauGIAT1Z347z3JxuzsbJqwfPj/s+5zzfDg8Z2ME4L8hhrVCDO3kDBfMUDf01Xb+KNecBjG08/NwAN8/9iEff4xw4OxCMbTz42AAx9lefNrrwfayA20tlzmWa6shhlZi+1meqh8FsxeZiAsbSy7MzC7wkVxfDTG0Ek98RsI8hJnMw4hlsPZBx7xvGZp2iY/lnkqIoZ105iuSqTyiRhor/i243eMcy7XVEEM7mew3pFgYNVJYWg6ipbWNY7m2GmJoJ5srQE0X28vUXqYmUzIjlmbZOu7dd3As11ZDDK2YycOiKJn6gkg0BX9gG9OvfXwk11dDDK1kWZJLsSx+gIiewNZmDIsLgdps45F5hELyCAf7eWTDOcRDJkJ+Hd1dPXws91RCDEuEG1/C7HqH45089jt8iLbPYefOLILNU5i+PsQlcl8lxLDEbsMoIpoXe9cmsaM9x5bmQZDcWKFBTJOLS+S+SoihYvOch0VjzHiRXW30j8xPQ5ihR+ijFi6V+yXEUKHzRFGWlFCyEMvWT2RvWDZOHVwq90uIocIqUugWWYBlb+kJXlAXOukml8t32BFDvcELgwVWwjxpUXZByYYxR08xSU546PS/JmKoJimXjf2WXXRjlWU+eoZX9BBeakc3NXNb+T12yoJdnsDQJspQy6I2siRbZNkM9WCCOjFIrdz69z0SYqioJNs4kb2n/uJGjtADLpfvsCOGCrUQSlBaEKtMbeM8v9nIP7yXQgxLOOtvwVl/u7j26qug3mzt/DDc5MBdauQSua8SYijRVHcVTXVXcIPO9mdHIYa1AfQLMXTLFSHSKD0AAAAASUVORK5CYII=\")\r\n\t.then(i => BuffInfo.buffs.aggression.img = i);\r\n\r\n\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__alt1_base__;","module.exports = __WEBPACK_EXTERNAL_MODULE__alt1_ocr__;"],"sourceRoot":""}